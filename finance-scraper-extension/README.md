# 金融数据抓取器 - 浏览器扩展

这个浏览器扩展可以帮助您从金融网站轻松地抓取财务报表数据，并导出为CSV、Excel或JSON格式。完全兼容Windows、macOS和Linux系统。

## 功能特点

- 自动检测页面中的财务表格
- 支持抓取多种财务数据（利润表、资产负债表、现金流量表等）
- 支持多种导出格式（CSV、Excel、JSON）
- 批量抓取功能，可从多个URL批量获取数据
- 支持CSV文件上传，轻松批量处理大量URL
- 跨平台兼容：支持Windows、macOS和Linux上的Chrome/Edge浏览器
- **新增：AI财务分析功能，可以智能分析财务数据并生成洞察报告**

## 安装指南

### Chrome浏览器（Windows/macOS/Linux）

1. 下载或克隆此仓库到本地
2. 打开Chrome浏览器，输入 `chrome://extensions/`
3. 打开右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择`finance-scraper-extension`文件夹
6. 扩展已成功安装，您将在工具栏看到其图标

### Edge浏览器（Windows）

1. 下载或克隆此仓库到本地
2. 打开Edge浏览器，输入 `edge://extensions/`
3. 打开左侧的"开发人员模式"
4. 点击"加载解压缩的扩展"
5. 选择`finance-scraper-extension`文件夹
6. 扩展已成功安装，您将在工具栏看到其图标

### Safari浏览器（macOS）

Safari浏览器需要额外的开发者配置，请参考[Apple开发者文档](https://developer.apple.com/documentation/safariservices/safari_web_extensions/converting_a_web_extension_for_safari)进行Safari扩展的打包和安装。

## 使用方法

### 单页面抓取

1. 打开包含财务数据表格的网页
2. 点击浏览器工具栏中的扩展图标
3. 选择要抓取的数据类型和导出格式
4. 点击"抓取当前页面数据"
5. 数据将被提取并下载为选定的格式

### 批量抓取

1. 点击浏览器工具栏中的扩展图标
2. 点击"批量抓取"按钮
3. 选择输入方式：
   - 直接输入URLs（每行一个）
   - 上传包含URL列的CSV文件
4. 选择数据类型、导出格式和延迟时间
5. 点击"开始抓取"
6. 扩展将依次访问每个URL并抓取数据，文件将自动下载到您的下载文件夹

### 使用AI财务分析功能

1. 点击浏览器工具栏中的扩展图标
2. 点击"可视化与分析"按钮
3. 在打开的页面中，切换到"AI分析"标签页
4. 上传CSV格式的财务数据文件，或选择已上传的文件
5. 输入自定义分析提示（可选）
6. 点击"分析数据"按钮
7. 等待系统生成分析结果，查看财务洞察报告
8. 可以点击"查看原始数据"按钮，以表格形式浏览财务数据

### 配置AI分析后端

为了使用AI分析功能，您需要配置一个后端API服务器：

1. 在"AI分析"标签页中，找到"后端API设置"卡片
2. 输入API服务器地址（默认为`http://localhost:5000`）
3. 输入API端点路径（默认为`/api/analyze`）
4. 点击"保存API配置"按钮
5. 可以点击"测试连接"按钮验证API连接是否正常

## CSV格式支持

扩展支持多种CSV格式：
- 标准逗号分隔值文件 (*.csv)
- 分号分隔值文件 (常见于欧洲和使用Excel的Windows系统)
- 处理各种换行符 (CR, LF, CRLF)，兼容Windows、macOS和Linux系统

## 注意事项

- 该扩展基于特定的表格结构来抓取数据，支持含有`data-test='financials'`属性的表格
- 批量抓取过程中请勿关闭批量抓取配置页面
- 请遵守网站的使用条款和访问频率限制
- 如有任何问题，请查看浏览器的开发者控制台（按F12）获取错误信息
- AI分析功能需要连接到后端Flask服务器，确保服务器正常运行

## 开发信息

- 本扩展采用纯JavaScript开发
- 主要文件：
  - `content.js`: 负责从网页中抓取数据
  - `popup.js`: 负责弹出窗口的交互
  - `background.js`: 负责后台任务处理
  - `batch.js`: 负责批量抓取功能
  - `visualization.js`: 负责数据可视化和AI分析功能

## AI财务分析功能

这个功能使用了DeepSeek AI模型来分析财务数据。系统会：

1. 阅读并理解您的财务报表
2. 分析关键财务指标和趋势
3. 生成详细的中文分析报告
4. 提供财务状况洞察和潜在的投资建议

您需要部署提供的Flask后端服务器，并确保在扩展中正确配置API地址。

## 系统要求

- Windows 7/8/10/11
- macOS 10.13 或更高版本
- Chrome 88 或更高版本
- Edge 88 或更高版本
- Safari 14 或更高版本（仅macOS）
- Python 3.8+（用于运行AI分析后端）

## 许可证

此项目采用MIT许可证 - 详情请参阅LICENSE文件 # financial_base_data_spider
